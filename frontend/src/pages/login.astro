---
// src/pages/login.astro (VERSION SIMPLIFIÉE)
import Layout from '../layouts/Layout.astro';
import LoginForm from '../components/LoginForm.jsx';
import AuthRedirect from '../components/AuthRedirect.astro'; 
---

<AuthRedirect requiredRole="public" /> 

<Layout title="Connexion | Maison des Sables">

	<main class="min-h-screen w-full grid grid-cols-1 lg:grid-cols-2 bg-sable">
		
		<div class="hidden lg:block relative h-full w-full bg-charbon overflow-hidden">
			<img 
				src="/gestion.jpg" 
				alt="Intérieur Luxe" 
				class="absolute inset-0 w-full h-full object-cover opacity-80 animate-slow-zoom"
			/>
			<div class="absolute inset-0 bg-charbon/40 mix-blend-multiply"></div>
			<div class="absolute inset-0 bg-gradient-to-t from-charbon/90 via-transparent to-transparent"></div>
			
			<div class="absolute bottom-16 left-16 max-w-md text-sable z-10">
				<p class="font-serif text-4xl leading-tight mb-4">"Le véritable luxe, c'est de ne se soucier de rien."</p>
				<div class="w-12 h-[1px] bg-or mb-4"></div>
				<p class="text-xs font-sans uppercase tracking-widest opacity-70">Espace Propriétaire & Voyageur</p>
			</div>
		</div>

		<div class="w-full h-full flex flex-col justify-between p-8 md:p-12 lg:p-24 relative">
			
			<div class="w-full flex justify-start">
				<a href="/" class="flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-charbon/40 hover:text-or transition-colors group">
					<span class="group-hover:-translate-x-1 transition-transform">←</span> Retour au site
				</a>
			</div>

			<div class="w-full max-w-md mx-auto my-12 animate-fade-in-up">
				
				<LoginForm client:only="react" /> 

			</div>

			<div class="w-full text-center">
				<p class="text-[10px] text-charbon/30 uppercase tracking-widest">© 2025 Maison des Sables • Sécurité SSL</p>
			</div>

		</div>

	</main>

</Layout>

<style>
	/* Styles inchangés (gardez les définitions de couleur pour le composant React) */
	.bg-sable { background-color: #EAEAEA; }
	.bg-charbon { background-color: #2C2C2C; }
	.text-charbon { color: #2C2C2C; }
	.text-sable { color: #EAEAEA; }
	.bg-or { background-color: #B47C5E; }
	.border-or { border-color: #B47C5E; }
	.hover\:text-or:hover { color: #B47C5E; }
	.hover\:border-or:hover { border-color: #B47C5E; }
	
	.animate-slow-zoom { animation: zoom 30s infinite alternate ease-in-out; }
	.animate-fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
	@keyframes zoom { from { transform: scale(1); } to { transform: scale(1.15); } }
	@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
</style>