---
// ==============================================================================
// MAISON DES SABLES - PAGE D'ACCUEIL (V15 - CONNECT√âE)
// ==============================================================================
import Layout from '../layouts/Layout.astro';
---

<Layout title="Maison des Sables | L'Exception sur le Bassin">
	
	<nav id="navbar" class="fixed top-0 w-full z-50 px-6 md:px-12 py-6 flex justify-between items-center text-sable transition-all duration-500 ease-in-out">
		<a href="/" class="font-serif text-2xl tracking-wider font-semibold z-50 hover:text-white transition-colors">
			Maison des Sables
		</a>

		<div class="hidden md:flex gap-12 font-sans text-sm tracking-wide font-medium">
			<a href="#philosophie" class="hover:text-white transition-colors duration-300 relative group py-2">
				Philosophie
				<span class="absolute bottom-0 left-0 w-0 h-[1px] bg-white transition-all duration-300 ease-out group-hover:w-full"></span>
			</a>
			<a href="#services" class="hover:text-white transition-colors duration-300 relative group py-2">
				Nos 3 Piliers
				<span class="absolute bottom-0 left-0 w-0 h-[1px] bg-white transition-all duration-300 ease-out group-hover:w-full"></span>
			</a>
			<a href="#villas" class="hover:text-white transition-colors duration-300 relative group py-2">
				Collection
				<span class="absolute bottom-0 left-0 w-0 h-[1px] bg-white transition-all duration-300 ease-out group-hover:w-full"></span>
			</a>
			<a href="#contact" class="hover:text-white transition-colors duration-300 relative group py-2">
				Contact
				<span class="absolute bottom-0 left-0 w-0 h-[1px] bg-white transition-all duration-300 ease-out group-hover:w-full"></span>
			</a>
		</div>

		<a id="client-btn" href="/login" class="hidden md:block group relative px-6 py-3 bg-or text-charbon font-sans text-sm font-semibold rounded-std overflow-hidden shadow-md shadow-or/20 hover:shadow-or/40 transition-all duration-500 hover:-translate-y-1">
			<span class="relative z-10 group-hover:text-white transition-colors duration-500">Espace Client</span>
			<div class="absolute inset-0 -translate-x-[150%] skew-x-12 bg-white/40 group-hover:translate-x-[150%] transition-transform duration-1000 ease-in-out z-0"></div>
		</a>

		<button id="menu-burger" class="md:hidden text-sm uppercase tracking-widest font-medium">Menu</button>
	</nav>

	<main class="relative w-full h-screen overflow-hidden bg-charbon cursor-default">
		<div id="hero-bg" class="absolute inset-0 z-0 w-[110%] h-[110%] -left-[5%] -top-[5%]">
			<video¬†
				autoplay¬†
				loop¬†
				muted¬†
				playsinline¬†
				class="w-full h-full object-cover opacity-90"
			>
				<source src="/beach_video.mp4" type="video/mp4" />
				<img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=2073&auto=format&fit=crop" alt="Plage" class="w-full h-full object-cover" />
			</video>
			<div class="absolute inset-0 bg-charbon/30 mix-blend-multiply"></div>¬†
			<div class="absolute inset-0 bg-gradient-to-b from-charbon/50 via-transparent to-charbon/90"></div>
			<div class="absolute inset-0 opacity-[0.07] mix-blend-overlay pointer-events-none" style="background-image: url('https://grainy-gradients.vercel.app/noise.svg');"></div>
		</div>

		<div class="relative z-10 h-full flex flex-col justify-center items-center text-center text-sable px-4 pt-10">
			<div class="overflow-hidden mb-8">
				<p class="hero-text font-sans text-xs md:text-sm tracking-[0.4em] uppercase text-or opacity-0 translate-y-10">
					Arcachon ‚Ä¢ Cap Ferret ‚Ä¢ Le Moulleau
				</p>
			</div>
			
			<h1 class="font-serif text-6xl md:text-8xl lg:text-[10rem] leading-[1.1] mb-12 text-sable">
				<div class="overflow-hidden">
					<span class="hero-title block translate-y-full opacity-0">L'Art de Vivre</span>
				</div>
				<div class="overflow-hidden mt-2">
					<span class="hero-title block translate-y-full opacity-0 italic font-light text-or/90">en bord de mer.</span>
				</div>
			</h1>

			<div class="flex flex-col md:flex-row gap-6 mt-8">
				<a href="#services" class="hero-btn opacity-0 group relative px-10 py-4 bg-or font-sans text-sm font-semibold rounded-std overflow-hidden shadow-lg shadow-or/20 hover:shadow-or/50 transition-all duration-500 hover:-translate-y-1">
					<span class="relative z-10 group-hover:text-white transition-colors duration-500">D√©couvrir nos Services</span>
					<div class="absolute inset-0 -translate-x-[150%] skew-x-12 bg-white/40 group-hover:translate-x-[150%] transition-transform duration-1000 ease-in-out z-0"></div>
				</a>
				<a href="#villas" class="hero-btn opacity-0 group relative px-10 py-4 border border-sable/30 backdrop-blur-sm text-sable font-sans text-sm font-medium rounded-std overflow-hidden hover:border-sable transition-all duration-500 hover:-translate-y-1">
					<span class="relative z-10 group-hover:text-charbon transition-colors duration-500">Voir la Collection</span>
					<div class="absolute inset-0 bg-sable translate-y-full group-hover:translate-y-0 transition-transform duration-500 ease-[cubic-bezier(0.19,1,0.22,1)] z-0"></div>
				</a>
			</div>
		</div>

		<div class="absolute bottom-10 left-1/2 -translate-x-1/2 text-sable/70 flex flex-col items-center gap-3 hero-scroll opacity-0">
			<span class="text-[10px] uppercase tracking-widest font-sans">Explorer</span>
			<div class="w-[1px] h-12 bg-gradient-to-b from-sable/0 via-sable to-sable/0 animate-pulse"></div>
		</div>
	</main>

	<section id="philosophie" class="relative py-32 px-6 bg-sable text-charbon overflow-hidden">
		<div class="max-w-4xl mx-auto text-center relative z-10">
			<span class="block text-or text-xs font-sans tracking-[0.2em] uppercase mb-6 reveal-text font-semibold">Notre Philosophie</span>
			<h2 class="font-serif text-4xl md:text-6xl leading-tight mb-8 reveal-text">
				"Nous ne g√©rons pas simplement des cl√©s, nous cultivons <span class="italic text-or">l'√©l√©gance</span> de vos s√©jours."
			</h2>
			<p class="font-sans text-charbon/70 text-lg leading-relaxed max-w-2xl mx-auto reveal-text font-light">
				Maison des Sables est n√©e d'une volont√© : offrir une exp√©rience sans couture sur le Bassin.¬†
				Dans un monde bruyant, nous choisissons la discr√©tion, le service invisible et le raffinement.
			</p>
		</div>
	</section>

	<section id="services" class="bg-sable py-24 px-4 md:px-8 relative z-10 overflow-hidden border-t border-charbon/5">
		<div class="max-w-7xl mx-auto text-center mb-20">
			<span class="block text-or text-xs font-sans tracking-[0.2em] uppercase mb-4 font-semibold reveal-text">Notre Savoir-Faire</span>
			<h3 class="font-serif text-4xl md:text-6xl text-charbon mb-4 reveal-text">3 Piliers d'Excellence</h3>
			<p class="font-sans text-charbon/60 max-w-xl mx-auto reveal-text">
				Une approche globale et humaine pour r√©pondre √† tous les moments de vie sur le Bassin.
			</p>
		</div>

		<div class="max-w-[1600px] mx-auto h-[800px] flex flex-col md:flex-row gap-2">
			<div class="group relative flex-1 hover:grow-[2] transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)] overflow-hidden rounded-std cursor-pointer border border-charbon/5">
				<img src="/gestion.jpg" alt="Gestion Locative" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-90"/>
				<div class="absolute inset-0 bg-gradient-to-t from-charbon/95 via-charbon/40 to-transparent"></div>
				<div class="absolute inset-0 p-8 md:p-12 flex flex-col justify-end text-sable">
					<div class="transform group-hover:-translate-y-4 transition-transform duration-500">
						<span class="inline-block px-3 py-1 mb-4 border border-or/50 rounded-full text-[10px] font-bold uppercase tracking-widest text-or bg-charbon/20 backdrop-blur-md">Propri√©taires Bailleurs</span>
						<h3 class="font-serif text-3xl md:text-5xl mb-4 text-white">Gestion Locative</h3>
						<p class="font-sans text-sm md:text-base text-sable/70 max-w-md opacity-0 h-0 group-hover:opacity-100 group-hover:h-auto transition-all duration-500 delay-100 leading-relaxed">
							Optimisation des revenus et s√©r√©nit√© totale.
						</p>
					</div>
					<div class="mt-6 border-t border-white/10 pt-6 flex justify-between items-end opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-200">
						<div><p class="text-xs uppercase tracking-wider text-sable/50 mb-1">Mod√®le</p><p class="font-serif text-2xl text-white">Commission <span class="text-or">20%</span></p></div>
						<a href="/gestion-locative" class="w-10 h-10 rounded-full bg-or text-charbon flex items-center justify-center text-lg hover:scale-110 transition-transform">‚Üí</a>
					</div>
				</div>
			</div>
			
			<div class="group relative flex-1 hover:grow-[2] transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)] overflow-hidden rounded-std cursor-pointer border border-charbon/5">
				<img src="/gestion.jpg" alt="Intendance" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-90 grayscale-[30%]"/>¬†
				<div class="absolute inset-0 bg-gradient-to-t from-charbon/95 via-charbon/40 to-transparent"></div>
				<div class="absolute inset-0 p-8 md:p-12 flex flex-col justify-end text-sable">
					<div class="transform group-hover:-translate-y-4 transition-transform duration-500">
						<span class="inline-block px-3 py-1 mb-4 border border-white/20 rounded-full text-[10px] font-bold uppercase tracking-widest text-sable bg-charbon/20 backdrop-blur-md">R√©sidence Secondaire</span>
						<h3 class="font-serif text-3xl md:text-5xl mb-4 text-white">Intendance</h3>
						<p class="font-sans text-sm md:text-base text-sable/70 max-w-md opacity-0 h-0 group-hover:opacity-100 group-hover:h-auto transition-all duration-500 delay-100 leading-relaxed">
							Vigilance et pr√©paration avant votre arriv√©e.
						</p>
					</div>
					<div class="mt-6 border-t border-white/10 pt-6 flex justify-between items-end opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-200">
						<div><p class="text-xs uppercase tracking-wider text-sable/50 mb-1">Mod√®le</p><p class="font-serif text-2xl text-white">Abonnements</p></div>
						<a href="/intendance" class="w-10 h-10 rounded-full bg-sable text-charbon flex items-center justify-center text-lg hover:scale-110 transition-transform">‚Üí</a>
					</div>
				</div>
			</div>
			
			<div class="group relative flex-1 hover:grow-[2] transition-all duration-700 ease-[cubic-bezier(0.25,1,0.5,1)] overflow-hidden rounded-std cursor-pointer border border-charbon/5">
				<img src="/experience.jpg" alt="Main dans la main" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-90 sepia-[20%]"/>
				<div class="absolute inset-0 bg-gradient-to-t from-[#2C241B]/95 via-[#2C241B]/40 to-transparent"></div>
				<div class="absolute inset-0 p-8 md:p-12 flex flex-col justify-end text-sable">
					<div class="transform group-hover:-translate-y-4 transition-transform duration-500">
						<span class="inline-block px-3 py-1 mb-4 border border-or/30 rounded-full text-[10px] font-bold uppercase tracking-widest text-or bg-charbon/20 backdrop-blur-md">Aide & Accompagnement</span>
						<h3 class="font-serif text-3xl md:text-5xl mb-4 text-white">Main dans la Main</h3>
						<p class="font-sans text-sm md:text-base text-sable/70 max-w-md opacity-0 h-0 group-hover:opacity-100 group-hover:h-auto transition-all duration-500 delay-100 leading-relaxed">
							Un service d√©di√© √† nos a√Æn√©s avec bienveillance.
						</p>
					</div>
					<div class="mt-6 border-t border-white/10 pt-6 flex justify-between items-end opacity-0 group-hover:opacity-100 transition-opacity duration-700 delay-200">
						<div><p class="text-xs uppercase tracking-wider text-sable/50 mb-1">Mod√®le</p><p class="font-serif text-2xl text-white">Forfaits & √† la carte</p></div>
						<a href="/accompagnement" class="w-10 h-10 rounded-full bg-or text-charbon flex items-center justify-center text-lg hover:scale-110 transition-transform">‚Üí</a>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section id="villas" class="bg-sable text-charbon pt-40 pb-24 lg:pt-48 lg:pb-0 lg:h-screen lg:overflow-hidden relative z-20 flex flex-col justify-start border-t border-charbon/5">
		
		<div class="max-w-[1800px] w-full mx-auto px-6 md:px-12 mb-12 flex items-end justify-between shrink-0">
			<div>
				<span class="text-or text-xs font-sans tracking-[0.2em] uppercase block mb-3 font-semibold">Collection 2025</span>
				<h3 class="font-serif text-4xl md:text-6xl">Nos P√©pites</h3>
			</div>
			<div class="lg:hidden text-xs text-charbon/50 uppercase tracking-widest animate-pulse">‚Üê Glisser pour voir ‚Üí</div>
		</div>

		<div id="villas-wrapper" class="w-full overflow-x-auto lg:overflow-visible no-scrollbar h-full flex items-center">
			<div id="villas-track" class="flex gap-8 md:gap-16 w-max px-6 md:px-12 pb-10 cursor-grab active:cursor-grabbing">
				
				<div class="villa-card relative w-[85vw] md:w-[450px] aspect-[3/4] group cursor-pointer rounded-[2rem] overflow-hidden shadow-md border border-charbon/5">
					<div class="absolute inset-0 bg-charbon transition-transform duration-700 group-hover:scale-105">
						<img src="https://images.unsplash.com/photo-1613490493576-7fde63acd811?q=80&w=2071&auto=format&fit=crop" alt="Villa" class="absolute inset-0 w-full h-[120%] object-cover object-center transition-transform duration-1000 -translate-y-[10%] group-hover:translate-y-0"/>
						<div class="absolute inset-0 bg-gradient-to-t from-charbon/90 via-transparent to-transparent"></div>
					</div>
					<div class="absolute inset-0 p-8 flex flex-col justify-end">
						<p class="text-or text-xs font-sans tracking-widest uppercase mb-2">Le Moulleau</p>
						<h4 class="font-serif text-3xl text-white mb-2">Villa des Abatilles</h4>
						<p class="text-sable/60 text-sm">8 Personnes ‚Ä¢ Piscine Chauff√©e</p>
						<div class="mt-4 text-or font-serif text-xl">d√®s 450‚Ç¨</div>
					</div>
				</div>

				<div class="villa-card relative w-[85vw] md:w-[450px] aspect-[3/4] group cursor-pointer rounded-[2rem] overflow-hidden shadow-md border border-charbon/5">
					<div class="absolute inset-0 bg-charbon transition-transform duration-700 group-hover:scale-105">
						<img src="https://images.unsplash.com/photo-1613977257363-707ba9348227?q=80&w=2070&auto=format&fit=crop" alt="Villa" class="absolute inset-0 w-full h-[120%] object-cover object-center transition-transform duration-1000 -translate-y-[10%] group-hover:translate-y-0"/>
						<div class="absolute inset-0 bg-gradient-to-t from-charbon/90 via-transparent to-transparent"></div>
					</div>
					<div class="absolute inset-0 p-8 flex flex-col justify-end">
						<p class="text-or text-xs font-sans tracking-widest uppercase mb-2">Cap Ferret</p>
						<h4 class="font-serif text-3xl text-white mb-2">L'Oyat du Ferret</h4>
						<p class="text-sable/60 text-sm">10 Personnes ‚Ä¢ Acc√®s Plage</p>
						<div class="mt-4 text-or font-serif text-xl">d√®s 620‚Ç¨</div>
					</div>
				</div>

				<div class="villa-card relative w-[85vw] md:w-[450px] aspect-[3/4] group cursor-pointer rounded-[2rem] overflow-hidden shadow-md border border-charbon/5">
					<div class="absolute inset-0 bg-charbon transition-transform duration-700 group-hover:scale-105">
						<img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=2070&auto=format&fit=crop" alt="Villa" class="absolute inset-0 w-full h-[120%] object-cover object-center transition-transform duration-1000 -translate-y-[10%] group-hover:translate-y-0"/>
						<div class="absolute inset-0 bg-gradient-to-t from-charbon/90 via-transparent to-transparent"></div>
					</div>
					<div class="absolute inset-0 p-8 flex flex-col justify-end">
						<p class="text-or text-xs font-sans tracking-widest uppercase mb-2">Arcachon Centre</p>
						<h4 class="font-serif text-3xl text-white mb-2">Penthouse Thiers</h4>
						<p class="text-sable/60 text-sm">4 Personnes ‚Ä¢ Rooftop</p>
						<div class="mt-4 text-or font-serif text-xl">d√®s 350‚Ç¨</div>
					</div>
				</div>

				<div class="w-[85vw] md:w-[300px] aspect-[3/4] rounded-[2rem] border border-charbon/10 flex flex-col items-center justify-center group cursor-pointer hover:bg-charbon/5 transition-colors">
					<div class="w-20 h-20 rounded-full border border-or flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
						<span class="text-3xl text-or">‚Üí</span>
					</div>
					<p class="font-serif text-2xl text-charbon text-center leading-tight">Voir toute<br/>la Collection</p>
				</div>

			</div>
		</div>
	</section>

	<section id="contact" class="bg-sable text-charbon py-32 px-6 md:px-12 relative overflow-hidden border-t border-charbon/5">
		<div class="absolute inset-0 opacity-[0.05] pointer-events-none" style="background-image: url('https://grainy-gradients.vercel.app/noise.svg');"></div>
		
		<div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 items-center relative z-10">
			<div>
				<span class="text-or text-xs font-sans tracking-[0.2em] uppercase mb-4 block reveal-text font-semibold">Parlons de vous</span>
				<h3 class="font-serif text-4xl md:text-6xl mb-6 reveal-text text-charbon">Un projet ? Une envie ?</h3>
				<p class="font-sans text-charbon/70 mb-10 text-lg reveal-text">
					Nous sommes √† votre √©coute pour √©changer sur vos besoins. Remplissez ce formulaire, nous vous r√©pondrons sous 24h.
				</p>
				<div class="space-y-6 reveal-text">
					<div class="flex items-center gap-4">
						<div class="w-10 h-10 rounded-full border border-or/30 flex items-center justify-center text-or">‚úâÔ∏è</div>
						<div><p class="text-xs uppercase tracking-widest text-charbon/50">Email</p><p class="font-serif text-xl text-charbon">bonjour@maisondesables.fr</p></div>
					</div>
					<div class="flex items-center gap-4">
						<div class="w-10 h-10 rounded-full border border-or/30 flex items-center justify-center text-or">üìû</div>
						<div><p class="text-xs uppercase tracking-widest text-charbon/50">T√©l√©phone</p><p class="font-serif text-xl text-charbon">+33 5 56 00 00 00</p></div>
					</div>
				</div>
			</div>

			<form id="contact-form" class="bg-white shadow-lg p-10 rounded-std border border-charbon/5 reveal-text">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
					<div class="group">
						<label class="block text-xs uppercase tracking-widest text-charbon/50 mb-2 group-focus-within:text-or transition-colors">Nom</label>
						<input type="text" name="lastname" class="w-full bg-transparent border-b border-charbon/20 py-2 text-charbon focus:outline-none focus:border-or transition-colors" placeholder="Votre nom" required>
					</div>
					<div class="group">
						<label class="block text-xs uppercase tracking-widest text-charbon/50 mb-2 group-focus-within:text-or transition-colors">Pr√©nom</label>
						<input type="text" name="firstname" class="w-full bg-transparent border-b border-charbon/20 py-2 text-charbon focus:outline-none focus:border-or transition-colors" placeholder="Votre pr√©nom" required>
					</div>
				</div>
				<div class="mb-8 group">
					<label class="block text-xs uppercase tracking-widest text-charbon/50 mb-2 group-focus-within:text-or transition-colors">Email</label>
					<input type="email" name="email" class="w-full bg-transparent border-b border-charbon/20 py-2 text-charbon focus:outline-none focus:border-or transition-colors" placeholder="votre@email.com" required>
				</div>
				<div class="mb-10 group">
					<label class="block text-xs uppercase tracking-widest text-charbon/50 mb-2 group-focus-within:text-or transition-colors">Message</label>
					<textarea name="message" rows="4" class="w-full bg-transparent border-b border-charbon/20 py-2 text-charbon focus:outline-none focus:border-or transition-colors resize-none" placeholder="Dites-nous en plus sur votre projet..."></textarea>
				</div>
				<button type="submit" class="group relative w-full py-4 bg-charbon text-sable font-sans text-sm font-semibold rounded-std overflow-hidden shadow-lg shadow-charbon/20 hover:shadow-charbon/40 transition-all duration-500 hover:-translate-y-1">
					<span class="relative z-10 group-hover:text-white transition-colors">Envoyer ma demande</span>
					<div class="absolute inset-0 -translate-x-[150%] skew-x-12 bg-or group-hover:translate-x-[150%] transition-transform duration-1000 ease-in-out z-0"></div>
				</button>
			</form>
		</div>
	</section>

	<footer class="bg-charbon text-sable pt-24 pb-12 px-6 relative z-10">
		<div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-12 border-b border-sable/10 pb-12 mb-12">
			<div class="md:col-span-2"><h5 class="font-serif text-3xl mb-6">Maison des Sables</h5><p class="font-sans text-sm text-sable/60 max-w-sm leading-relaxed">Conciergerie haut de gamme bas√©e √† Arcachon.</p></div>
			<div><h6 class="font-sans text-xs uppercase tracking-widest mb-6 font-bold text-or">Navigation</h6><ul class="space-y-4 font-sans text-sm text-sable/70"><li><a href="#villas" class="hover:text-or transition-colors">Nos Villas</a></li><li><a href="#services" class="hover:text-or transition-colors">Nos Services</a></li><li><a href="/login" class="hover:text-or transition-colors">Espace Propri√©taire</a></li></ul></div>
			<div><h6 class="font-sans text-xs uppercase tracking-widest mb-6 font-bold text-or">Contact</h6><ul class="space-y-4 font-sans text-sm text-sable/70"><li>bonjour@maisondesables.fr</li><li>+33 5 56 00 00 00</li></ul></div>
		</div>
		<div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center text-[10px] uppercase tracking-widest text-sable/40 font-sans"><p>¬© 2025 Maison des Sables.</p><p>Design & Dev par Gemini</p></div>
	</footer>

</Layout>

<style>
	@keyframes breathe {
		0%, 100% { transform: scale(1); }
		50% { transform: scale(1.03); }
	}
	.animate-breathe { animation: breathe 18s infinite ease-in-out; }
	.no-scrollbar::-webkit-scrollbar { display: none; }
	.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	window.addEventListener('load', () => {
		
		// --- 1. CONNEXION CERVEAU ---
		const form = document.getElementById('contact-form') as HTMLFormElement;
		if (form) {
			form.addEventListener('submit', async (e) => {
				e.preventDefault(); 
				const formData = new FormData(form);
				const data: any = Object.fromEntries(formData);

				// Astuce : On combine Nom + Pr√©nom en un seul champ 'name'
				data.name = `${data.lastname} ${data.firstname}`;
				delete data.lastname;
				delete data.firstname;

				data.service_name = "Contact Accueil"; 
				
				try {
					const response = await fetch('http://localhost:5000/api/contact/lead', {
						method: 'POST',
						headers: { 'Content-Type': 'application/json' },
						body: JSON.stringify(data)
					});
					const result = await response.json();
					if (response.ok) {
						alert("‚úÖ Message envoy√© !");
						form.reset();
					} else {
						alert("‚ùå Erreur : " + (result.error || "Probl√®me inconnu"));
					}
				} catch (error) {
					console.error(error);
					alert("‚ùå Impossible de contacter le serveur.");
				}
			});
		}


		// --- 2. ANIMATIONS EXISTANTES ---
		const tl = gsap.timeline({ defaults: { ease: "power3.out" } });
		tl.to(".hero-text", { y: 0, opacity: 1, duration: 1.2 })
		¬† .to(".hero-title", { y: 0, opacity: 1, duration: 1.5, stagger: 0.2 }, "-=0.8")
		¬† .to(".hero-btn", { opacity: 1, duration: 1, stagger: 0.1 }, "-=0.8")
		¬† .to(".hero-scroll", { opacity: 1, duration: 1 }, "-=0.5");

		// FIX SCROLL HORIZONTAL
		let mm = gsap.matchMedia();
		mm.add("(min-width: 1024px)", () => {
			const track = document.querySelector("#villas-track");
			const section = document.querySelector("#villas");
			
			ScrollTrigger.refresh();

			if(track && section) {
				const scrollAmount = track.scrollWidth - window.innerWidth;
				
				if(scrollAmount > 0) {
					gsap.to(track, {
						x: -scrollAmount,
						ease: "none",
						scrollTrigger: {
							trigger: section,
							pin: true,
							scrub: 1,
							start: "center center",
							end: () => "+=" + scrollAmount,
							invalidateOnRefresh: true,
						}
					});
				}
			}
		});
	});

	document.addEventListener("mousemove", (e) => {
		const mouseX = e.clientX / window.innerWidth - 0.5;
		const mouseY = e.clientY / window.innerHeight - 0.5;
		gsap.to("#hero-bg", { x: -mouseX * 20, y: -mouseY * 20, duration: 1.5, ease: "power2.out" });
	});

	const textElements = document.querySelectorAll('.reveal-text');
	textElements.forEach(el => {
		gsap.fromTo(el,¬†
			{ y: 40, opacity: 0 },
			{ y: 0, opacity: 1, duration: 1, ease: "power3.out", scrollTrigger: { trigger: el, start: "top 85%" } }
		);
	});

	const navbar = document.querySelector("#navbar");
	const clientBtn = document.querySelector("#client-btn");

	window.addEventListener("scroll", () => {
		// @ts-ignore
		if (window.scrollY > 50) {¬†
			navbar.classList.add("bg-or/95", "shadow-md", "py-4", "backdrop-blur-md");
			navbar.classList.remove("py-6");
			if(clientBtn) {
				clientBtn.classList.replace("border-sable/30", "border-white/30");
				clientBtn.classList.remove("bg-or", "text-charbon");
				clientBtn.classList.add("hover:bg-white", "hover:text-or");
				clientBtn.classList.add("bg-white", "text-or");
				clientBtn.classList.remove("hover:bg-sable", "hover:text-charbon");
			}
		} else {¬†
			navbar.classList.remove("bg-or/95", "shadow-md", "py-4", "backdrop-blur-md");
			navbar.classList.add("py-6");
			if(clientBtn) {
				clientBtn.classList.replace("border-white/30", "border-sable/30");
				clientBtn.classList.add("bg-or", "text-charbon");
				clientBtn.classList.remove("bg-white", "text-or");
				clientBtn.classList.remove("hover:bg-white", "hover:text-or");
				clientBtn.classList.add("hover:bg-sable", "hover:text-charbon");
			}
		}
	});
</script>