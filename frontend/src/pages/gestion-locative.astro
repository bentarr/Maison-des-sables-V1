---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Gestion Locative | Maison des Sables">
	
	<nav class="fixed top-0 w-full z-50 px-6 md:px-12 py-8 flex justify-between items-center mix-blend-difference text-white transition-all duration-500">
		<a href="/" class="font-serif text-xl tracking-wider font-semibold hover:text-or transition-colors">‚Üê Retour</a>
		<a href="/" class="hidden md:block font-serif text-2xl tracking-wider font-bold">Maison des Sables</a>
		<a href="#contact" class="border border-white/30 px-6 py-2 text-xs font-sans uppercase tracking-widest rounded-std hover:bg-white hover:text-charbon transition-all">Contact</a>
	</nav>

	<header class="relative h-[70vh] bg-charbon overflow-hidden flex items-center justify-center">
		<img src="/gestion.jpg" alt="Gestion Locative" class="absolute inset-0 w-full h-full object-cover opacity-60 scale-105 animate-slow-zoom"/>
		<div class="absolute inset-0 bg-gradient-to-b from-charbon/60 via-transparent to-sable"></div>
		
		<div class="relative z-10 text-center px-4 mt-20 max-w-4xl">
			<span class="inline-block py-1 px-3 border border-white/20 rounded-full text-[10px] font-sans tracking-[0.2em] uppercase text-white/80 mb-6 backdrop-blur-md">Propri√©taires Bailleurs</span>
			<h1 class="font-serif text-5xl md:text-8xl text-sable mb-8 leading-tight">Maximisez<br/><span class="italic text-or">Vos Revenus.</span></h1>
			<p class="text-sable/80 max-w-xl mx-auto font-sans text-lg leading-relaxed">
				Confiez-nous votre bien. Nous transformons votre r√©sidence secondaire en un actif performant gr√¢ce √† une gestion h√¥teli√®re d'excellence.
			</p>
		</div>
	</header>

	<section class="bg-sable text-charbon py-32 px-6 md:px-12">
		<div class="max-w-7xl mx-auto">
			<div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-24 items-center">
				
				<div class="lg:col-span-5 flex flex-col justify-center space-y-8">
					<h3 class="text-xs font-bold uppercase tracking-widest text-charbon/40 mb-4">Notre Expertise</h3>
					
					<div class="service-trigger group cursor-pointer opacity-100 transition-opacity duration-300" data-target="img-1">
						<div class="flex items-center justify-between border-b border-charbon/10 pb-4 mb-4 group-hover:border-or transition-colors">
							<h4 class="font-serif text-3xl md:text-4xl text-charbon group-hover:text-or transition-colors">Commercialisation</h4>
							<span class="text-or opacity-0 group-hover:opacity-100 transition-opacity text-2xl">‚Üí</span>
						</div>
						<div class="service-details text-sm text-charbon/70 leading-relaxed space-y-2 pl-2 border-l-2 border-or/20 group-hover:border-or transition-colors">
							<p>Nous cr√©ons l'envie d√®s le premier clic pour attirer les meilleurs voyageurs.</p>
							<ul class="list-disc list-inside opacity-80">
								<li>Shooting photo professionnel</li>
								<li>R√©daction d'annonce multilingue</li>
								<li>Diffusion Airbnb, Booking & Direct</li>
							</ul>
						</div>
					</div>

					<div class="service-trigger group cursor-pointer opacity-50 hover:opacity-100 transition-opacity duration-300" data-target="img-2">
						<div class="flex items-center justify-between border-b border-charbon/10 pb-4 mb-4 group-hover:border-or transition-colors">
							<h4 class="font-serif text-3xl md:text-4xl text-charbon group-hover:text-or transition-colors">Yield Management</h4>
							<span class="text-or opacity-0 group-hover:opacity-100 transition-opacity text-2xl">‚Üí</span>
						</div>
						<div class="service-details hidden group-hover:block text-sm text-charbon/70 leading-relaxed space-y-2 pl-2 border-l-2 border-or/20 group-hover:border-or">
							<p>Nous ajustons vos tarifs quotidiennement pour maximiser le taux d'occupation.</p>
							<ul class="list-disc list-inside opacity-80">
								<li>Algorithme de prix dynamique</li>
								<li>Analyse de la concurrence locale</li>
								<li>Strat√©gie haute et basse saison</li>
							</ul>
						</div>
					</div>

					<div class="service-trigger group cursor-pointer opacity-50 hover:opacity-100 transition-opacity duration-300" data-target="img-3">
						<div class="flex items-center justify-between border-b border-charbon/10 pb-4 mb-4 group-hover:border-or transition-colors">
							<h4 class="font-serif text-3xl md:text-4xl text-charbon group-hover:text-or transition-colors">Exp√©rience 5‚òÖ</h4>
							<span class="text-or opacity-0 group-hover:opacity-100 transition-opacity text-2xl">‚Üí</span>
						</div>
						<div class="service-details hidden group-hover:block text-sm text-charbon/70 leading-relaxed space-y-2 pl-2 border-l-2 border-or/20 group-hover:border-or">
							<p>Un accueil et un service dignes des plus grands h√¥tels pour fid√©liser la client√®le.</p>
							<ul class="list-disc list-inside opacity-80">
								<li>M√©nage & Linge de qualit√© h√¥teli√®re</li>
								<li>Accueil physique personnalis√©</li>
								<li>Assistance voyageurs 7j/7</li>
							</ul>
						</div>
					</div>
				</div>

				<div class="lg:col-span-7 relative h-[500px] lg:h-[600px] rounded-[2rem] overflow-hidden shadow-2xl">
					<img id="img-1" src="/gestion.jpg" class="service-img absolute inset-0 w-full h-full object-cover transition-all duration-700 scale-105 opacity-100" alt="Commercialisation"/>
					<img id="img-2" src="https://images.unsplash.com/photo-1554224155-6726b3ff858f?q=80&w=2071&auto=format&fit=crop" class="service-img absolute inset-0 w-full h-full object-cover transition-all duration-700 scale-100 opacity-0" alt="Finance"/>
					<img id="img-3" src="https://images.unsplash.com/photo-1566073771259-6a8506099945?q=80&w=2070&auto=format&fit=crop" class="service-img absolute inset-0 w-full h-full object-cover transition-all duration-700 scale-100 opacity-0" alt="Luxe"/>
					
					<div class="absolute inset-0 bg-charbon/10 mix-blend-multiply pointer-events-none"></div>
					<div class="absolute bottom-8 left-8 bg-white/90 backdrop-blur text-charbon px-6 py-3 rounded-std text-xs font-bold uppercase tracking-widest shadow-lg">
						Performance & S√©r√©nit√©
					</div>
				</div>

			</div>
		</div>
	</section>

	<section class="bg-white py-24 px-6 md:px-12 border-t border-charbon/5">
		<div class="max-w-7xl mx-auto">
			
			<div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24 items-center">
				
				<div>
					<span class="text-or text-xs font-sans tracking-[0.2em] uppercase mb-4 block">Transparence Totale</span>
					<h3 class="font-serif text-4xl md:text-6xl text-charbon mb-8">20% <span class="text-2xl text-charbon/50 font-sans align-middle">TTC</span></h3>
					<p class="text-xl font-serif text-charbon mb-6">Commission sur revenus g√©n√©r√©s.</p>
					<p class="font-sans text-charbon/70 leading-relaxed mb-8 text-sm">
						Pas de frais d'entr√©e, pas de frais fixes mensuels. Notre r√©mun√©ration est index√©e sur votre r√©ussite. Nous ne gagnons de l'argent que si vous en gagnez.
					</p>
					
					<div class="space-y-4 border-t border-charbon/10 pt-8">
						<div class="flex items-center gap-4">
							<span class="w-8 h-8 rounded-full bg-or/10 flex items-center justify-center text-or font-bold">‚úì</span>
							<span class="text-sm text-charbon/80">Gestion int√©grale des r√©servations</span>
						</div>
						<div class="flex items-center gap-4">
							<span class="w-8 h-8 rounded-full bg-or/10 flex items-center justify-center text-or font-bold">‚úì</span>
							<span class="text-sm text-charbon/80">Check-in / Check-out & M√©nage</span>
						</div>
						<div class="flex items-center gap-4">
							<span class="w-8 h-8 rounded-full bg-or/10 flex items-center justify-center text-or font-bold">‚úì</span>
							<span class="text-sm text-charbon/80">Maintenance mineure incluse</span>
						</div>
					</div>
				</div>

				<div class="bg-charbon text-sable p-10 rounded-[2rem] shadow-2xl relative overflow-hidden">
					<div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: url('https://grainy-gradients.vercel.app/noise.svg');"></div>
					
					<h4 class="font-serif text-2xl mb-8 relative z-10">Simulez vos revenus</h4>
					
					<div class="mb-6 relative z-10">
						<label class="text-xs uppercase tracking-widest text-sable/60 mb-2 block">Localisation du bien</label>
						<div class="relative">
							<select id="location-select" class="w-full bg-sable/10 border border-sable/20 text-sable py-3 px-4 rounded-std appearance-none focus:outline-none focus:border-or transition-colors cursor-pointer">
								<option value="1.5">Cap Ferret (Presqu'√Æle)</option>
								<option value="1.3">Moulleau / Pyla-sur-Mer / Pereire</option>
								<option value="1" selected>Arcachon Centre / Aiguillon</option>
								<option value="0.85">La Teste / Gujan-Mestras</option>
								<option value="0.7">+ 10km (Teich, Biganos, Mios)</option>
							</select>
							<div class="absolute inset-y-0 right-4 flex items-center pointer-events-none text-or">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
							</div>
						</div>
					</div>

					<div class="mb-6 relative z-10">
						<label class="text-xs uppercase tracking-widest text-sable/60 mb-2 block">Mode de location</label>
						<div class="flex gap-4">
							<button class="mode-btn flex-1 py-3 border border-sable/20 rounded-std text-sm hover:bg-sable hover:text-charbon transition-colors active" data-mode="saison">Saisonni√®re</button>
							<button class="mode-btn flex-1 py-3 border border-sable/20 rounded-std text-sm hover:bg-sable hover:text-charbon transition-colors" data-mode="annuel">Annuelle</button>
						</div>
					</div>

					<div class="mb-8 relative z-10">
						<div class="flex justify-between mb-2">
							<label class="text-xs uppercase tracking-widest text-sable/60">Surface</label>
							<span id="surface-val" class="text-or font-bold">60 m¬≤</span>
						</div>
						<input type="range" id="surface-range" min="20" max="250" value="60" class="w-full h-1 bg-sable/20 rounded-lg appearance-none cursor-pointer accent-or"/>
					</div>

					<div class="bg-white/5 rounded-xl p-6 border border-white/10 relative z-10 mb-8">
						<p class="text-xs uppercase tracking-widest text-sable/50 mb-1">Potentiel Revenus Nets <span class="text-or text-[9px] ml-1">(20% d√©duits)</span></p>
						<div class="flex items-baseline gap-2">
							<span id="revenue-display" class="text-5xl font-serif text-or">-- ---</span>
							<span class="text-xl">‚Ç¨</span>
						</div>
						<p id="disclaimer-text" class="text-[9px] text-sable/40 mt-3 italic leading-relaxed">
							*Estimation indicative non contractuelle non contractuelle bas√©e sur un taux d'occupation de 100% en haute saison.
						</p>
					</div>

					<button id="cta-simulator" class="w-full bg-sable text-charbon py-4 rounded-std font-bold uppercase tracking-widest hover:bg-or hover:text-white transition-colors relative z-10">
						Recevoir mon √©tude d√©taill√©e
					</button>
				</div>

			</div>
		</div>
	</section>

	<section id="contact" class="bg-sable text-charbon py-24 px-6 md:px-12 border-t border-charbon/5 scroll-mt-20">
		<div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16">
			
			<div>
				<span class="text-or text-xs font-sans tracking-[0.2em] uppercase mb-4 block">D√©marrer</span>
				<h3 class="font-serif text-3xl md:text-4xl mb-6">Lan√ßons votre projet</h3>
				<p class="font-sans text-charbon/70 mb-8 leading-relaxed">
					Remplissez ce formulaire avec les d√©tails de votre bien. Nous vous contacterons pour une visite d'estimation gratuite.
				</p>
				<div class="space-y-6">
					<div class="flex items-center gap-4">
						<div class="w-10 h-10 rounded-full border border-or/30 flex items-center justify-center text-or">‚úâÔ∏è</div>
						<div><p class="text-xs uppercase tracking-widest text-charbon/50">Email</p><a href="mailto:bonjour@maisondesables.fr" class="font-serif text-xl text-charbon hover:text-or transition-colors">bonjour@maisondesables.fr</a></div>
					</div>
					<div class="flex items-center gap-4">
						<div class="w-10 h-10 rounded-full border border-or/30 flex items-center justify-center text-or">üìû</div>
						<div><p class="text-xs uppercase tracking-widest text-charbon/50">T√©l√©phone</p><a href="tel:+33556000000" class="font-serif text-xl text-charbon hover:text-or transition-colors">+33 5 56 00 00 00</a></div>
					</div>
				</div>
			</div>

			<form class="space-y-6 bg-white p-10 rounded-[2rem] shadow-lg border border-charbon/5">
				<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
					<div class="group"><label class="text-xs uppercase tracking-widest text-charbon/40 mb-2 block">Nom</label><input type="text" class="w-full bg-sable/30 border-b border-charbon/10 p-3 text-charbon outline-none focus:border-or transition-all" required/></div>
					<div class="group"><label class="text-xs uppercase tracking-widest text-charbon/40 mb-2 block">T√©l√©phone</label><input type="tel" class="w-full bg-sable/30 border-b border-charbon/10 p-3 text-charbon outline-none focus:border-or transition-all" required/></div>
				</div>
				<div class="group"><label class="text-xs uppercase tracking-widest text-charbon/40 mb-2 block">Email</label><input type="email" class="w-full bg-sable/30 border-b border-charbon/10 p-3 text-charbon outline-none focus:border-or transition-all" required/></div>
				
				<div class="group">
					<label class="text-xs uppercase tracking-widest text-charbon/40 mb-2 block">Type de bien & Estimation</label>
					<input type="text" id="input-type-bien" class="w-full bg-or/10 border-b border-or p-3 text-charbon font-bold outline-none" placeholder="Utilisez le simulateur ci-dessus..." />
				</div>

				<div class="group"><label class="text-xs uppercase tracking-widest text-charbon/40 mb-2 block">Expliquer votre projet</label><textarea rows="3" class="w-full bg-sable/30 border-b border-charbon/10 p-3 text-charbon outline-none focus:border-or transition-all resize-none"></textarea></div>
				<button class="w-full bg-charbon text-sable py-4 rounded-std font-bold uppercase tracking-widest hover:bg-or hover:text-white transition-colors shadow-lg">Demander mon estimation</button>
			</form>

		</div>
	</section>

	<footer class="bg-charbon text-sable py-12 text-center border-t border-white/10">
		<p class="font-serif text-2xl mb-4">Maison des Sables</p>
	</footer>
</Layout>

<style>
	.animate-fade-in-up { animation: fadeInUp 1s ease-out forwards; opacity: 0; transform: translateY(20px); }
	.animate-slow-zoom { animation: zoom 20s infinite alternate; }
	.delay-100 { animation-delay: 0.1s; }
	.delay-200 { animation-delay: 0.2s; }
	@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
	@keyframes zoom { from { transform: scale(1); } to { transform: scale(1.1); } }

	.mode-btn.active {
		background-color: #F7F4EB; /* Sable */
		color: #1C1C1C; /* Charbon */
		border-color: #F7F4EB;
	}
	select option { background-color: #1C1C1C; color: #F7F4EB; }
</style>

<script>
	['astro:page-load', 'load'].forEach(event => {
		window.addEventListener(event, () => {
			
			// 1. INTERACTIVE SWITCHER
			const triggers = document.querySelectorAll('.service-trigger');
			const images = document.querySelectorAll('.service-img');

			triggers.forEach(trigger => {
				trigger.addEventListener('mouseenter', () => {
					triggers.forEach(t => {
						t.classList.remove('opacity-100'); t.classList.add('opacity-50');
						const d = t.querySelector('.service-details'); if(d) d.classList.add('hidden');
					});
					trigger.classList.remove('opacity-50'); trigger.classList.add('opacity-100');
					const det = trigger.querySelector('.service-details'); if(det) det.classList.remove('hidden');

					// @ts-ignore
					const targetId = trigger.dataset.target;
					images.forEach(img => { img.classList.remove('opacity-100', 'scale-105'); img.classList.add('opacity-0', 'scale-100'); });
					const targetImg = document.getElementById(targetId);
					if(targetImg) { targetImg.classList.remove('opacity-0', 'scale-100'); targetImg.classList.add('opacity-100', 'scale-105'); }
				});
			});

			// 2. SIMULATEUR LOGIQUE
			const surfaceRange = document.getElementById('surface-range') as HTMLInputElement;
			const surfaceVal = document.getElementById('surface-val');
			const revenueDisplay = document.getElementById('revenue-display');
			const modeBtns = document.querySelectorAll('.mode-btn');
			const locationSelect = document.getElementById('location-select') as HTMLSelectElement;
			const disclaimerText = document.getElementById('disclaimer-text');
			const ctaSimulator = document.getElementById('cta-simulator');
			const inputTypeBien = document.getElementById('input-type-bien') as HTMLInputElement;
			const contactSection = document.getElementById('contact');

			let currentMode = 'saison';

			// BASES DE PRIX 2025 (Estimation ‚Ç¨/m2)
			const PRIX_SAISON_M2_SEMAINE = 25; 
			const PRIX_ANNUEL_M2_MOIS = 18;
			const SEMAINES_SAISON = 17; 

			modeBtns.forEach(btn => {
				btn.addEventListener('click', () => {
					modeBtns.forEach(b => b.classList.remove('active'));
					btn.classList.add('active');
					// @ts-ignore
					currentMode = btn.dataset.mode;
					calculate();
				});
			});

			if(surfaceRange) {
				surfaceRange.addEventListener('input', () => {
					if(surfaceVal) surfaceVal.textContent = surfaceRange.value + ' m¬≤';
					calculate();
				});
			}

			if(locationSelect) {
				locationSelect.addEventListener('change', calculate);
			}

			function calculate() {
				if(!surfaceRange || !revenueDisplay || !locationSelect) return;
				const surface = parseInt(surfaceRange.value);
				const locationMultiplier = parseFloat(locationSelect.value);
				let grossRevenue = 0;
				let netRevenue = 0;

				if (currentMode === 'saison') {
					// Formule Saisonni√®re (Brut)
					grossRevenue = surface * PRIX_SAISON_M2_SEMAINE * SEMAINES_SAISON * locationMultiplier; 
					// Net (Brut - 20%)
					netRevenue = grossRevenue * 0.8;

					if(disclaimerText) {
						disclaimerText.innerHTML = `
							*Estimation indicative non contractuelle bas√©e sur un taux d'occupation th√©orique de 100% en haute saison (01/06 au 01/10).<br>
							Chaque bien √©tant unique, seule une visite technique nous permettra de valider ce potentiel.<br>
							Sources : Moyennes de march√© locales et donn√©es AirDNA 2024 pour biens Premium.
						`;
					}
				} else {
					// Formule Annuelle (Brut)
					grossRevenue = surface * PRIX_ANNUEL_M2_MOIS * 12 * locationMultiplier;
					// Net (Brut - 20% si gestion int√©grale, souvent moins en annuel mais gardons la logique)
					netRevenue = grossRevenue * 0.8;

					if(disclaimerText) {
						disclaimerText.innerHTML = `
							*Estimation indicative non contractuelle hors charges pour une location meubl√©e √† l'ann√©e.<br>
							Sources : Observatoire des Loyers et SeLoger (Zone tendue Bassin d'Arcachon).
						`;
					}
				}
				
				revenueDisplay.textContent = new Intl.NumberFormat('fr-FR').format(Math.round(netRevenue));
			}

			if(ctaSimulator) {
				ctaSimulator.addEventListener('click', () => {
					const modeLabel = currentMode === 'saison' ? "Saisonni√®re" : "Annuelle";
					const locationLabel = locationSelect.options[locationSelect.selectedIndex].text.split('(')[0].trim();
					
					if(inputTypeBien) {
						// On ne met plus l'estimation chiffr√©e dans le champ texte
						inputTypeBien.value = `Location ${modeLabel} √† ${locationLabel} - ${surfaceRange.value}m¬≤`;
						inputTypeBien.parentElement.classList.add('animate-pulse');
						setTimeout(() => inputTypeBien.parentElement.classList.remove('animate-pulse'), 1000);
					}
					
					if(contactSection) contactSection.scrollIntoView({ behavior: 'smooth' });
				});
			}

			calculate(); 
		});
	});
</script>