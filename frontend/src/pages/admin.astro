---
import Layout from '../layouts/Layout.astro';
// Import du composant React pour la sidebar
import Sidebar from '../components/admin/Sidebar.jsx'; 
import AuthGuard from '../components/AuthGuard.jsx';
// Import du nouveau composant maître pour le dashboard
import AdminDashboard from '../components/admin/AdminDashboard.jsx';

const bgSable = "bg-[#F9F7F2]"; 
---

<Layout title="Administration | Maison des Sables">
  
  <AuthGuard client:only="react" requiredRole="admin">
    
    <div class={`flex min-h-screen w-full ${bgSable} font-sans`}>
      
      <Sidebar client:load />

      <main class="flex-1 flex flex-col min-w-0 ml-24 relative transition-all duration-500 ease-[cubic-bezier(0.25,1,0.5,1)] main-content">
        
        <AdminDashboard client:only="react" />
      </main>

    </div>
  </AuthGuard>
</Layout>

<style is:global>
    /* Règle CSS Globale : 
       Lorsque le body possède la classe 'sidebar-expanded' (ajoutée par React au survol), 
       on force la marge gauche du contenu principal à 320px (w-80) pour éviter le chevauchement. 
    */
    body.sidebar-expanded .main-content {
        margin-left: 320px; /* 20rem = w-80 */
    }
</style>