---
// src/pages/admin.astro
import Layout from '../layouts/Layout.astro';
import AuthGuard from '../components/AuthGuard.jsx';
// On importe uniquement le "Chef d'Orchestre", plus besoin de la Sidebar ici
import AdminDashboard from '../components/admin/AdminDashboard.jsx';
---

<Layout title="Administration | Maison des Sables">
  
  {/* AuthGuard vérifie si on est connecté avant de charger le dashboard */}
  <AuthGuard client:only="react" requiredRole="admin">
    
    {/* AdminDashboard gère désormais tout l'écran (Sidebar + Contenu).
        On retire les div et main inutiles ici pour laisser React gérer le layout.
    */}
    <AdminDashboard client:only="react" />

  </AuthGuard>

</Layout>

<style is:global>
    /* On garde cette règle au cas où, pour que l'effet de flou ou de scroll 
       sur le body reste propre, mais c'est React qui gère les marges maintenant.
    */
    html, body {
        height: 100%;
        overflow: hidden; /* Important pour que le scroll se fasse DANS le composant React */
    }
</style>